pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
-- procedural hills
-- 2358

--[[inspired by a game being
made by @yolwoocle that uses 
a form of procedural hills, 
i loved that idea and 
challenged myself 
to make one too.
also had coding help from 
@valkhiya and @hen

notes:
- comments can be removed.
- redundant code is commented.
- irrelevant code from an 
		earlier project.
- sprite 1 is unused 
		test sprite and not required.
- snow sometimes glitches 
		and looks odd.
- definitely better ways 
  of coding and optimising...
]]

--[[unused
array of colors
hillscolors={1,2,3,4,5,6,7,8,9,11,13,14,15}]]

--[[unused
func to select x from
hillscolors array
function choose(list)
	return list[ceil(rnd(#list))]
end]]

function _init()
--[[unused
	frame=0]]

--[[random seed for hills
	seed=rnd(1)
	
--[[calc move left><right
	definitely could be better]]
	tx=0 		-- pos ...
	tdx=1		-- pos ...
	tdxs=3	-- pos ...
	
--[[unused
	select random color
	col=flr(rnd(16))]]
	
--[[unused
	select random color from 
	hillscolors
	col=choose(hillscolors)]]
	
--[[unused
	set hill to dark blue
	col=1]]
end

function _update()
--[[unused
	frame+=1]]

--[[move left><right
	if (btn(⬅️)) tx+=tdx*tdxs
	if (btn(➡️)) tx-=tdx*tdxs
end

--[[sine wave calc
function sinw(pos,period,amp)
	return sin(pos*period)*amp
end

--[[draw hills
prob should separate
far hills, near hills and snow
into own functions]]
function drawhills()
--[[a ton of idk 
but it mostly works \_😐_/
big thanks to @valkhiya for
help with changing 
pset stuff to line stuff 
therefore improving cpu]]
	for x=0,127 do
		y=topography(tx-x)
		
		-- far hills
		line(x,127,x,170-(topography(x-tx/8)),13)
		
		-- near hills
		line(x,127,x,topography(tx-x),1)
		
		-- snow
		for y=y-1,topography(y) do
			pset(x,y,7)
		end
	end

--[[unused
old method with pset 
now using line above

  -- hills; bad cpu
		for y=topography(tx-x),(128) do
 		pset(x,y,col)
			
   --	snow; realy bad cpu
			for y=y-2,topography(y) do
				pset(x,y,7)
			end
		end
	end]]
end

function drawground()
--[[temp ground
	rectfill(0,115,127,127,3)
end

function topography(x)
	local pos=x/127

--[[combine sinws to 
achieve terrain
90 is y pos; that should 
really be a var]]
	return 90+sinw(pos+100*seed,2,10)+sinw(pos+100*seed,0.8,10)+sinw(pos+100*seed,8,1)
end

function _draw()
--[[draw here
	cls(12)
	drawhills()
	drawground()
end

__gfx__
00000000001122330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001122330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700445566770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000445566770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770008899aabb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007008899aabb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ccddeeff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ccddeeff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
ccccccccccccccccccccccccccccccccccddddddcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccdddddddddcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
ccccccccccccccccccccccccccccccccddddddddddddddcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccdddddddddddddddddcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
ccccccccccccccccccccccccccccccddddddddddddddddddddcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccddddddddddddddddddddddccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccddddddddddddddddddddddccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
ccccccccccccccccccccccccccccddddddddddddddddddddddddcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccddddddddddddddddddddddddddccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
ccccccccccccccccccccccccccddddddddddddddddddddddddddddcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccdddddddddddddddddddddddddddddcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
ccccccccccccccccccccccccddddddddddddddddddddddddddddd777cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccdddddddddddddddddddddddddddd7777777cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
ccccccccccccccccccccccdddddddddddddddddddddddddddd777777777ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccdddddddddddddddddddddddddddd777777777777ccccccccccccccccccccccccccccccccccdddddcccccccccccccccccccccccccccc
ccccccccccccccccccccdddddddddddddddddddddddddddd77777777777777ccccccccccccccccccccccccccccccccddddddddcccccccccccccccccccccccccc
cccccccccccccccccccdddddddddddddddddddddddddddd7777777777777777cccccccccccccccccccccccccccccdddddddddddccccccccccccccccccccccccc
ccccccccccccccccccddddddddddddddddddddddddddd77777777777777777777ccccccccccccccccccccccccccdddddddddddddcccccccccccccccccccccccc
c7777cccccccccccccddddddddddddddddddddddddd77777777777777777777777cccccccccccccccccccccccdddddddddddddddddcccccccccccccccccccccc
7777777ccccccccccdddddddddddddddddddddddd777777777777777777777777777ccccccccccccccccccdddddddddddddddddddddccccccccccccccccccccc
77777777ccccccccdddddddddddddddddddddddd77777777777777777777777777777cccccccccccccdddddddddddddddddddddddddddccccccccccccccccccc
7777777777ccccccdddddddddddddddddddddd77777777777777777777777777777777ccccccccccdddddddddddddddddddddddddddddddccccccccccccccccc
7777777777cccccdddddddddddddddddddddd777777777777777777777777777777777cccccccccdddddddddddddddddddddddddddddddddcccccccccccccccc
77777777777cccdddddddddddddddddddddd77777777777777777777777777777777777cccccccdddddddddddddddddddddddddddddddddddccccccccccccccc
777777777777ccddddddddddddddddddddd7777777777777771171117177777777777777ccccddddddddddddddddddddddddddddddddddddddcccccccccccccc
77777777777777dddddddddddddddddddd77777777777777711111111111117777777777dddddddddddddddddddddddddddddddddddddddddddccccccccccccc
777777777777777ddddddddddddddddddd777777777777711111111111111117777777777dddddddddddddddddddddddddddddddddddddddddddcccccccccccc
7777777777777777777ddddddddddddd777777777777711111111111111111111777777777ddddddddddddddddddddddddddddddddddddddddddcccccccccccc
7111171777777777777777777dddddd7777777777111111111111111111111111171777777ddddddddddddddddddddddddddddddddddddddddddd777777ccccc
111111117177777777777777777777777777711711111111111111111111111111111177777ddddddddddddddddddddddddddddddddddddddddd777777777777
111111111111711777777777777777777711111111111111111111111111111111111111777dddddddddddddddddddddddddddddddddddddddd7777777777777
1111111111111111111777711777777111111111111111111111111111111111111111111177dddddddddddddddddddddddddddddddddddddd77717771177777
1111111111111111111111111111111111111111111111111111111111111111111111111117ddddddddddddddddddddddddddddddddddddd777111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111177ddddddddddddddddddddddddddddddddddd7771111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111177ddddddddddddddddddddddddddddddddd77111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111dddddddddddddddddddddddddddddddd711111111111111111
1111111111111111111111111111111111111111111111111111111111111111111111111111111ddddddddddddddddddddddddddddddd111111111111111111
1111111111111111111111111111111111111111111111111111111111111111111111111111111dddddddddddddddddddddddddddddd1111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111ddddddddddddddddddddddddddd111111111111111111111
1111111111111111111111111111111111111111111111111111111111111111111111111111111111ddddddddddddddddddddddd11111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111dddddddddddddddddddd1111111111111111111111111
1111111111111111111111111111111111111111111111111111111111111111111111111111111111111ddddddddddddddddd11111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111dddddddddddddd1111111111111111111111111111
1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111ddddddddddd11111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111ddddddddd111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111ddddddd1111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111ddd111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333

